
/* CREAR LA BASE DE DATOS JUEGO */

DROP DATABASE IF EXISTS JUEGO;
CREATE DATABASE JUEGO;
USE JUEGO;

/* CREAR TABLA JUGADORES */

CREATE TABLE JUGADORES (

	ID INT NOT NULL,
	USUARIO VARCHAR (30),
	CONTRASENA VARCHAR (30) NOT NULL,

PRIMARY KEY (ID) 

)ENGINE=innoDB;

/* CREAR TABLA PARTIDAS */

CREATE TABLE PARTIDAS (


	ID INT NOT NULL, 
	DURACION INT,
	GANADOR VARCHAR (50),	
	FECHA_HORA VARCHAR (50),
	
PRIMARY KEY (ID)

)ENGINE=innoDB;

/* CREAR TABLA RELACIONES */

CREATE TABLE PARTICIPACION (

	ID_J INT,
	ID_P INT,

	FOREIGN KEY (ID_J) REFERENCES JUGADORES (ID),
	FOREIGN KEY (ID_P) REFERENCES PARTIDAS  (ID)

)ENGINE=innoDB;


/* INSERTAR EN TABLA JUGADORES */

INSERT INTO JUGADORES VALUES (1 ,  'MOHAMED' ,  '1234G');
INSERT INTO JUGADORES VALUES (2 ,  'JULIA'   ,  '5678J');
INSERT INTO JUGADORES VALUES (3 ,  'MARIA'   ,  '9012M');

/* INSERTAR EN TABLA PARTIDAS */

INSERT INTO PARTIDAS VALUES (1 , 10 , 'MOHAMED' , '13/03/2023_17:45:45');
INSERT INTO PARTIDAS VALUES (2 , 15 , 'JULIA'   , '14/03/2023_20:15:45');
INSERT INTO PARTIDAS VALUES (3 ,  5 , 'MARIA'   , '15/03/2023_17:45:45');


/* INSERTAR EN TABLA DE RELACIONES */


INSERT INTO PARTICIPACION VALUES (1,2);
INSERT INTO PARTICIPACION VALUES (2,1);
INSERT INTO PARTICIPACION VALUES (1,3);
INSERT INTO PARTICIPACION VALUES (3,1);
INSERT INTO PARTICIPACION VALUES (2,3);
INSERT INTO PARTICIPACION VALUES (3,2);


/* CONSULTAS */


/* CONSULTAS MOHAMED */

SELECT PARTIDAS.ID FROM (JUGADORES, PARTIDAS, PARTICIPACION)
WHERE  PARTIDAS.GANADOR = 'MOHAMED'
AND    JUGADORES.ID = PARTICIPACION.ID_J
AND    PARTIDAS.ID  = PARTICIPACION.ID_P; 



/* CONSULTA JULIA */

SELECT DISTINCT PARTIDAS.GANADOR FROM (JUGADORES, PARTIDAS, PARTICIPACION)
WHERE  PARTIDAS.DURACION > 9
AND    JUGADORES.ID = PARTICIPACION.ID_J
AND    PARTIDAS.ID  = PARTICIPACION.ID_P; 


/* CONSULTA MARIA */

SELECT DISTINCT PARTIDAS.FECHA_HORA FROM (JUGADORES, PARTIDAS, PARTICIPACION)
WHERE  PARTIDAS.ID = 3
AND    JUGADORES.ID = PARTICIPACION.ID_J
AND    PARTIDAS.ID  = PARTICIPACION.ID_P; 


-- DISTINCT para que no salga repetido dos veces













